<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JSON</title>
  </head>
  <body>
    <div>
      JSON 是一种语法，用来序列化对象、数组、数值、字符串、布尔值和 null
      。它基于 JavaScript
      语法，但与之不同：JavaScript不是JSON，JSON也不是JavaScript。
    </div>
    <div>
      JSON对象包含两个方法: 用于解析 JavaScript Object Notation (JSON) 的
      parse() 方法，以及将对象/值转换为 JSON字符串的 stringify()
      方法。除了这两个方法,
      JSON这个对象本身并没有其他作用，也不能被调用或者作为构造函数调用。
    </div>
    <div>
      JSON的方法：
      <div>
        JSON.parse(text[, reviver])
        解析JSON字符串并返回对应的值，可以额外传入一个转换函数，用来将生成的值和其属性,
        在返回之前进行某些修改。
      </div>
      <div>
        JSON.stringify() 返回与指定值对应的JSON字符串，可以通过额外的参数,
        控制仅包含某些属性, 或者以自定义方法来替换某些key对应的属性值。
      </div>
    </div>
    <script>
      function parse(sJSON) {
        return eval("(" + sJSON + ")");
      }
      let strObj = JSON.stringify({ name: 1 });
      console.log("strObj", strObj);
      let parseJSON = parse(strObj);
      console.log("parseJSON", parseJSON);
      let Polyfill = eval("(" + strObj + ")");
      console.log("Polyfill", Polyfill);

      // JSON.parse(text[, reviver])   reviver
      JSON.parse('{"p": 5}', function (k, v) {
        if (k === "") return v; // 如果到了最顶层，则直接返回属性值，
        return v * 2; // 否则将属性值变为原来的 2 倍。
      });
      // JSON.parse("null", function (k, v) {
      //   console.log("k", k);
      //   console.log("v", v);
      //   if (k === "") return v; // 如果到了最顶层，则直接返回属性值，
      //   console.log("v", v);
      //   return v * 2; // 否则将属性值变为原来的 2 倍。
      // });
      JSON.parse(
        '{"1": 1, "2": 2,"3": {"4": 4, "5": {"6": 6}}}',
        function (k, v) {
          console.log(k); // 输出当前的属性名，从而得知遍历顺序是从内向外的，
          // 最后一个属性名会是个空字符串。
          return v; // 返回原始属性值，相当于没有传递 reviver 参数。
        }
      );
    </script>
  </body>
</html>
